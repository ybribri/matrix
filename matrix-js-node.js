module.exports=class t{#t;constructor(t,i){null!=t&&null!=i&&(this.row=t,this.column=i,this.#t=Array.from({length:this.row},(t=>Array.from({length:this.column},(t=>null)))))}get value(){return this.#t}set value(t){return!!Array.isArray(t)&&(this.#t=t,this.row=this.#t.length,this.column=this.#t[0].length,!0)}getValueOf(t=[0,0]){const[i,r]=this.#i(t);if(!(i<0||i>this.row-1||r<0||r>this.#t[i].length-1))return this.#t[i][r]}setValueOf(t=[0,0],i){Array.isArray(t)||(i=t,t=[0,0]);const[r,e]=this.#i(t);if(!(r<0||e<0)){if(null!=i)return this.#t[r][e]=i,i;console.log("value is missing.")}}static isMatrix(t){return t instanceof this}fill(i=null,r=[0,0],e=[this.row-1,this.#t[this.row-1].length]){const[h,n]=this.#r(r),[s,l]=this.#e(e);if(h>this.row||h>s||s==h&&n>=l)return this.#t;if(s<0||l<0)return this.#t;for(let t=h;t<=s;t++)for(let r=t==h?n:0;r<(t==s?l:this.#t[t].length);r++)this.#t[t][r]="function"==typeof i?i(this.#t[t][r],[t,r],this.#t):i;let a=new t(this.#t.length,this.#t[0].length);return a.value=this.#t,a}reverse(i="colrow"){i.includes("col")&&(this.#t=this.#t.map(((t,i)=>t.map(((i,r)=>t[t.length-1-r]))))),i.includes("row")&&(this.#t=this.#t.map(((t,i)=>this.#t[this.#t.length-1-i])));let r=new t(this.#t.length,this.#t[0].length);return r.value=this.#t,r}sort(i,r="row"){if("col"!==r&&"row"!==r)return this.#t;if("col"==r&&(this.#t=this.#t.map(((t,r)=>t.sort(i)))),"row"==r){let t=this.#t.flat();t=t.sort(i);let r=[],e=[];t.forEach(((t,i)=>{r.push(t),(i+1)%this.#t[0].length==0&&(e.push(r),r=[])})),this.#t=e}let e=new t(this.#t.length,this.#t[0].length);return e.value=this.#t,e}map(i,r){if(null==i)return void console.log("undefined is not a function");void 0!==r&&(i=i.bind(r));let e=this.#t.map(((t,r)=>t.map(((t,e)=>i(t,[r,e],this.#t))))),h=new t(e.length,e[0].length);return h.value=e,h}filter(i,r){if(null==i)return void console.log("undefined is not a function");void 0!==r&&(i=i.bind(r));let e=this.#t.map(((t,r)=>t.map(((t,e)=>1==i(t,[r,e],this.#t)?t:null))));e=e.flat(2).filter((t=>null!==t));let h=[];if(e.length>0){let t=[];e.forEach(((i,r)=>{t.push(i),(r+1)%this.column!=0&&r!=e.length-1||(h.push(t),t=[])}))}let n=new t(h.length,h[0].length);return n.value=h,n}forEach(t,i){null!=t?(void 0!==i&&(t=t.bind(i)),this.#t.forEach(((i,r)=>i.forEach(((i,e)=>t(i,[r,e],this.#t)))))):console.log("undefined is not a function")}flat(i=1){let r=new t(this.#t.length,this.#t[0].length);return r.value=this.#t.map((t=>t.flat(i))),r}find(t,i){if(null!=t){void 0!==i&&(t=t.bind(i));for(let i=0;i<this.#t.length;i++)for(let r=0;r<this.#t[i].length;r++)if(!0===t(this.#t[i][r],[i,r],this.#t))return this.#t[i][r]}else console.log("undefined is not a function")}findIndex(t,i){if(null!=t){void 0!==i&&(t=t.bind(i));for(let i=0;i<this.#t.length;i++)for(let r=0;r<this.#t[i].length;r++)if(!0===t(this.#t[i][r],[i,r],this.#t))return[i,r];return[-1,-1]}console.log("function is missing.")}findLast(t,i){if(null!=t){void 0!==i&&(t=t.bind(i));for(let i=this.#t.length-1;i>=0;i--)for(let r=this.#t[i].length-1;r>=0;r--)if(!0===t(this.#t[i][r],[i,r],this.#t))return this.#t[i][r]}}findLastIndex(t,i){void 0!==i&&(t=t.bind(i));for(let i=this.#t.length-1;i>=0;i--)for(let r=this.#t[i].length-1;r>=0;r--)if(!0===t(this.#t[i][r],[i,r],this.#t))return[i,r];return[-1,-1]}indexOf(t,i=[0,0]){if(null==t)return[-1,-1];const[r,e]=this.#r(i);if(r>this.row-1)return[-1,-1];for(let i=r;i<this.#t.length;i++)for(let h=i==r?e:0;h<this.#t[i].length;h++)if(this.#t[i][h]===t)return[i,h];return[-1,-1]}lastIndexOf(t,i=[this.row-1,this.#t[this.row-1].length-1]){if(null==t)return[-1,-1];const[r,e]=this.#h(i);if(r<0)return[-1,-1];for(let i=r;i>=0;i--)for(let h=i==r?e:this.#t[i].length-1;h>=0;h--)if(this.#t[i][h]===t)return[i,h];return[-1,-1]}includes(t,i=[0,0]){if(null==t)return!1;const[r,e]=this.#r(i);if(r>this.row-1)return!1;for(let i=r;i<this.#t.length;i++)for(let h=i==r?e:0;h<this.#t[i].length;h++)if(this.#t[i][h]===t)return!0;return!1}at(t=[0,0]){let[i,r]=this.#i(t);if(!(i>this.row-1||i<0))return this.#t[i][r]}join(t=","){return this.#t.map((i=>i.join(t))).join(t)}concat(){let i=JSON.parse(JSON.stringify(this.#t));switch(arguments[arguments.length-1]){case"col":if(1==arguments.length)break;let r=i[0].length,e=0;i.forEach(((t,i)=>{r>t.length&&(r=t.length,e=i)}));for(let r=0;r<arguments.length-1;r++){let h=arguments[r];if(t.isMatrix(h)&&(h=h.value),Array.isArray(h)||1!=!h[Symbol.isConcatSpreadable])for(let t=0;t<h.length;t++)Array.isArray(h[t])?(i[e]=e>i.length?[...h[t]]:[...i[e],...h[t]],e++,e=e>this.row-1?0:e):(i[e]=e>i.length?[h[t]]:[...i[e],h[t]],e++,e=e>this.row-1?0:e);else i[e]=[...i[e],h],e++,e=e>this.row-1?0:e}break;default:i=i.flat(2);for(let r=0;r<arguments.length;r++){let e=arguments[r];if(t.isMatrix(e)&&(e=e.value),Array.isArray(e)||1!=!e[Symbol.isConcatSpreadable])for(let t=0;t<e.length;t++)i=Array.isArray(e[t])?[...i,...e[t]]:[...i,e[t]];else i=[...i,e]}i=this.#n(i)}let r=new t(i.length,i[0].length);return r.value=i,r}pop(){if(0==this.#t.length)return;let t="",i=[];return this.#t.forEach(((r,e)=>{e==this.row-1&&r.forEach(((i,e)=>{e==r.length-1&&(t=r.pop())})),r.length>0&&i.push(r)})),this.#t=i,this.row=this.#t.length,0==this.row?this.column=0:this.column=this.#t[0].length,t}push(){if(0!=arguments.length){for(let t=0;t<arguments.length;t++)this.#t[this.row-1].push(arguments[t]);return this.#t=this.#n(this.#t),this.row=this.#t.length,this.column=this.#t[0].length,this.#t[this.#t.length-1].length}}shift(){if(0==this.#t.length||0==this.#t[0].length)return;let t=this.#t[0].shift();return this.#t=this.#n(this.#t),this.row=this.#t.length,this.column=this.#t[0].length,t}unshift(t){if(null!=t)return this.#t[0].unshift(t),this.#t=this.#n(this.#t),this.row=this.#t.length,this.column=this.#t[0].length,this.#t[this.#t.length-1].length}slice(i=[0,0],r=[this.row-1,this.column]){const[e,h]=this.#r(i),[n,s]=this.#e(r);if(e>this.row||e>n||n==e&&h>=s)return[];if(n<0&&s<0)return[];let l=[];for(let t=0;t<this.row;t++){let i=this.#t[t];if(!(t<e||t>n))for(let r=0;r<i.length;r++){let a=i[r];t==e&&r<h||(t==n&&r>=s||l.push(a))}}let a=this.#n(l),o=new t(a.length,a[0].length);return o.value=a,o}splice(){if(null==arguments[0])return[];if(!Array.isArray(arguments[0]))return[];if(2!=arguments[0].length)return[];let[t,i]=this.#r(arguments[0]),r=null==arguments[1]?this.row*this.column:arguments[1],e=[];if(r>0&&t<=this.row-1)for(let h=0;h<r&&(i>this.#t[t].length-1&&(t++,i=0),!(t>this.#t.length-1||t==this.#t.length-1&&i>this.#t[t].length-1));h++)e.push(this.#t[t][i]),this.#t[t][i]="!!ToBeRemovedSoon!!",i++;let h=this.#t.flat().filter((t=>"!!ToBeRemovedSoon!!"!==t));[t,i]=this.#r(arguments[0]);let n=1==this.row?i:t*this.column+i;if(void 0!==arguments[2]&&n<h.length-1)for(let t=2;t<arguments.length;t++){let i=arguments[t];h.splice(n+t-2,0,i)}return this.#t=this.#n(h),this.row=this.#t.length,this.column=this.#t[0].length,e}every(t,i){void 0!==i&&(t=t.bind(i));for(let i=0;i<this.#t.length;i++)for(let r=0;r<this.#t[i].length;r++)if(!1===t(this.#t[i][r],[i,r],this.#t))return!1;return!0}some(t,i){void 0!==i&&(t=t.bind(i));for(let i=0;i<this.#t.length;i++)for(let r=0;r<this.#t[i].length;r++)if(!0===t(this.#t[i][r],[i,r],this.#t))return!0;return!1}reduce(t,i){let r,e,h=0;if(0!=this.#t.flat(2).length){null==i?(h=1,e=this.#t[0][0]):e=i;for(let i=0;i<this.#t.length;i++)for(let n=0==i?h:0;n<this.#t[i].length;n++)r=t(e,this.#t[i][n],[i,n],this.#t),e=r;return r}}reduceRight(t,i){let r,e,h=this.#t[this.row-1].length-1,n=this.row-1;if(0!=this.#t.flat(2).length){if(null==i){if(h=this.#t[n].length-2,h<0){if(n--,n<0)return this.#t[this.row-1][this.column-1];h=this.#t[n].length-1}e=this.#t[0][0]}else e=i;for(let i=n;i>=0;i--)for(let s=i==n?h:this.#t[i].length-1;s>=0;s--)r=t(e,this.#t[i][s],[i,s],this.#t),e=r;return r}}values(){return function*(){for(let t=0;t<this.row;t++)for(let i=0;i<this.#t[t].length;i++)yield this.#t[t][i]}.bind(this)()}entries(){return function*(){for(let t=0;t<this.row;t++)for(let i=0;i<this.#t[t].length;i++)yield[[t,i],this.#t[t][i]]}.bind(this)()}keys(){return function*(){for(let t=0;t<this.row;t++)for(let i=0;i<this.#t[t].length;i++)yield[t,i]}.bind(this)()}toString(){return this.#t.toString()}copyWithin(t=[0,0],i=[0,0],r=[this.row-1,this.#t[this.row-1].length]){if((t=this.#r(t))[0]>this.row-1)return this;if((i=this.#r(i))[0]>this.row-1)return this;r=this.#e(r);let e=1==this.row?t[1]:t[0]*this.column+t[1],h=1==this.row?i[1]:i[0]*this.column+i[1],n=1==this.row?r[1]:r[0]*this.column+r[1],s=this.#t.flat(3).copyWithin(e,h,n),l=[];if(s.length>0){let t=[];s.forEach(((i,r)=>{t.push(i),(r+1)%this.column!=0&&r!=s.length-1||(l.push(t),t=[])}))}return this.#t=l,this}#i(t){let[i,r]=t;return i=i<0?this.row+i:i,r=r<0?this.column+r:r,[i,r]}#r(t){let[i,r]=t;return i=i<0?this.row+i:i,i=i<0?0:i,r<0&&(r=this.#t[i].length+r),r=r<0?0:r,i==this.row-1&&r>this.#t[i].length-1&&(i=this.row),i<this.row-1&&r>this.column-1&&(i++,r=0),[i,r]}#h(t){let[i,r]=t;return i=i<0?this.row+i:i,i=i>this.row-1?this.row-1:i,r<0&&(r=this.#t[i].length+r),r=r>this.#t[i].length-1?this.#t[i].length-1:r,0==i&&r<0&&(i=-1),i>0&&r<0&&(i--,r=this.#t[i].length-1),[i,r]}#e(t){let[i,r]=t;return i<0&&(i=this.row+i),i=i>this.row-1?this.row-1:i,r<0&&(r=this.#t[i].length+r),r=r>this.#t[i].length?this.#t[i].length:r,0==i&&r<1&&(i=-1),i>0&&r<=0&&(i--,r=this.#t[i].length),[i,r]}#n(t){t=t.flat();let i=[],r=[];return t.forEach(((e,h)=>{r.push(e),(h+1)%this.column!=0&&h!=t.length-1||(i.push(r),r=[])})),i}};